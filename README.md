# 在线游戏平台

一个支持多种游戏的在线游戏平台，目前包含五子棋联机对战和斗地主联机对战游戏，支持局域网联机和移动端访问。

## 🎯 平台特性

### 游戏平台功能
- 🏠 **游戏大厅**: 美观的游戏选择首页
- 📊 **实时统计**: 显示在线人数和活跃房间
- 🎮 **多游戏支持**: 可扩展的游戏架构
- 📱 **全平台兼容**: 完美支持桌面端和移动端
- 🚀 **即开即玩**: 无需注册，直接开始游戏

### 五子棋游戏功能
- 🎮 **双人对战**: 支持两名玩家在线对战
- 🤖 **人机对战**: 智能AI对手，三种难度
- 🌐 **局域网联机**: 局域网内多设备连接
- 👥 **观众模式**: 支持观众观看对局
- 💬 **实时聊天**: 内置聊天系统
- 🎨 **美观界面**: 现代化的游戏界面设计
- 📱 **触摸支持**: 完美的移动端体验
- 🎯 **落子标记**: 最后一次落子位置用绿色虚线方框标记

### 斗地主游戏功能
- 🃏 **三人联机**: 支持三名玩家在线对战
- 🎯 **叫地主**: 轮流叫分确定地主
- 🎴 **智能出牌**: 支持多种牌型判断
- 🌐 **局域网联机**: 局域网内多设备连接
- 💬 **实时聊天**: 内置聊天系统
- 🎨 **美观界面**: 现代化的游戏界面设计
- 📱 **触摸支持**: 完美的移动端体验

## 技术栈

- **前端**: HTML5 Canvas, CSS3, JavaScript
- **后端**: Node.js, Express
- **实时通信**: Socket.IO
- **样式**: CSS Grid, Flexbox

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 启动服务器

```bash
npm start
```

或者开发模式：

```bash
npm run dev
```

### 3. 访问游戏

打开浏览器访问：
- 本机: http://localhost:3000
- 局域网其他设备: http://[服务器IP]:3000

## 游戏规则

### 五子棋基本规则
- 15x15的棋盘
- 黑子先手
- 首先连成五子的玩家获胜
- 支持水平、垂直、对角线方向

### 斗地主基本规则
- 3人游戏（1个地主，2个农民）
- 54张牌（包括大小王）
- 每人17张，留3张地主牌
- 轮流叫地主，叫分最高者成为地主
- 地主先出，按顺序轮流出牌
- 地主出完所有牌获胜，或农民出完所有牌获胜

### 斗地主牌型
- **单牌**: 单张牌
- **对子**: 两张相同点数的牌
- **三张**: 三张相同点数的牌
- **顺子**: 连续5张或以上的单牌
- **连对**: 连续3对或以上的对子
- **飞机**: 连续2个或以上的三张
- **炸弹**: 四张相同点数的牌
- **王炸**: 大小王组合（最大牌型）

## 操作说明

### 房间管理
- **创建房间**: 点击"创建房间"按钮，获得6位房间号
- **加入房间**: 输入房间号后点击"加入房间"
- **复制房间号**: 点击"复制房间号"分享给朋友

### 五子棋操作
- **落子**: 点击棋盘空位落子
- **聊天**: 在聊天框输入消息与对手交流
- **重新开始**: 游戏结束后可以重新开始

### 斗地主操作
- **叫地主**: 选择叫分或不叫
- **出牌**: 选择要出的牌，点击"出牌"按钮
- **过牌**: 点击"过牌"按钮跳过当前回合
- **聊天**: 在聊天框输入消息与对手交流
- **重新开始**: 游戏结束后可以重新开始

### 界面说明
- **游戏状态**: 显示当前游戏进度
- **玩家信息**: 显示当前轮到哪位玩家
- **聊天室**: 实时消息交流

## 项目结构

```
wuziqi/
├── package.json          # 项目配置
├── server.js            # 服务器主文件
├── game.js              # 五子棋游戏核心逻辑
├── doudizhu.js          # 斗地主游戏核心逻辑
├── ai.js                # 五子棋AI算法
├── public/              # 静态文件目录
│   ├── index.html       # 主页面
│   ├── wuziqi.html     # 五子棋游戏页面
│   ├── doudizhu.html   # 斗地主游戏页面
│   ├── client.js       # 五子棋客户端逻辑
│   └── doudizhu-client.js # 斗地主客户端逻辑
└── README.md            # 说明文档
```

## 核心文件说明

### server.js
- Express服务器配置
- Socket.IO事件处理
- 房间管理和游戏状态维护
- 支持五子棋和斗地主两种游戏

### game.js
- 五子棋游戏逻辑
- 胜负判断算法
- 棋盘状态管理

### doudizhu.js
- 斗地主游戏逻辑
- 牌型判断算法
- 游戏流程管理

### client.js
- 五子棋前端游戏界面
- Canvas绘制
- 实时通信处理

### doudizhu-client.js
- 斗地主前端游戏界面
- 卡牌渲染
- 实时通信处理

## 网络架构

```
客户端1 ←→ Socket.IO ←→ Node.js服务器 ←→ Socket.IO ←→ 客户端2
客户端3 ←→ Socket.IO ←→ Node.js服务器 ←→ Socket.IO ←→ 客户端4
```

## 部署说明

### 局域网部署
1. 在局域网内的一台设备上运行服务器
2. 确保防火墙允许3000端口访问
3. 其他设备通过服务器IP地址访问

### 公网部署
1. 部署到云服务器（如阿里云、腾讯云等）
2. 配置域名和SSL证书
3. 修改端口配置（如需要）

## 开发说明

### 添加新功能
1. 在相应的游戏逻辑文件中添加核心逻辑
2. 在`server.js`中添加服务器事件处理
3. 在相应的客户端文件中添加前端交互
4. 更新界面样式

### 调试模式
使用`npm run dev`启动开发模式，代码修改后自动重启服务器。

## 常见问题

### Q: 无法连接到服务器
A: 检查防火墙设置，确保3000端口开放

### Q: 游戏卡顿或掉线
A: 检查网络连接，重新刷新页面

### Q: 无法创建房间
A: 确保服务器正常运行，检查浏览器控制台错误信息

### Q: 斗地主游戏需要几个人？
A: 斗地主需要3个人才能开始游戏

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request来改进这个项目！
